(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{4083:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);function r(e){let{loading:t,children:a}=e;return(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold cursor-pointer py-2 px-5 rounded hover:bg-blue-700 flex items-center justify-center",disabled:t,children:t?(0,s.jsx)("div",{className:"h-6 w-6 border-3 border-white border-t-transparent rounded-full animate-spin"}):a})}},4398:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),r=a(2115),l=a(5695),n=a(760),i=a(9302),o=a(4083),c=a(4776);function d(e){let{type:t}=e,[a,d]=(0,r.useState)({email:"",password:""}),[u,m]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[h,x]=(0,r.useState)(!1),b=(0,l.useRouter)(),g=e=>{d(t=>({...t,[e.target.name]:e.target.value}))},j=async e=>{e.preventDefault(),m(""),f(""),x(!0);try{let e=await fetch("/api/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await e.json();e.ok?(f(s.message||"Успешно!"),"login"===t&&b.push("/dashboard")):m(s.error||"Ошибка")}catch(e){m("Произошла ошибка запроса")}finally{x(!1)}};return(0,s.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:j,children:[(0,s.jsx)(i.A,{name:"email",type:"email",label:"Email",value:a.email,onChange:g,required:!0}),(0,s.jsx)(i.A,{name:"password",type:"password",label:"Пароль",value:a.password,onChange:g,required:!0}),(0,s.jsx)(o.A,{loading:h,children:"login"===t?"Войти":"Зарегистрироваться"}),(0,s.jsxs)(n.N,{children:[u&&(0,s.jsx)(c.A,{error:u}),p&&(0,s.jsx)(c.A,{success:p})]})]})}function u(){let[e,t]=(0,r.useState)("login");return(0,s.jsxs)("div",{className:" max-w-xs w-full p-6 pb-10 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rounded shadow-lg",children:[(0,s.jsx)("div",{className:" mb-4 ",children:["login","register"].map((a,r)=>(0,s.jsxs)("span",{onClick:()=>t(a),className:"font-bold cursor-pointer transition-opacity duration-150 active:opacity-50 ".concat(e===a?"opacity-100":"opacity-50"),children:["login"===a?"Вход":"Регистрация",r<1&&(0,s.jsx)("span",{className:"mx-1",children:"/"})]},a))}),(0,s.jsx)(d,{type:e})]})}},4581:(e,t,a)=>{Promise.resolve().then(a.bind(a,4398))},4776:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),r=a(2115),l=a(7650),n=a(6408);function i(e){let{error:t,success:a}=e,[i,o]=(0,r.useState)(!1);if((0,r.useEffect)(()=>o(!0),[]),!i)return null;let c=null!=t?t:a;return(0,l.createPortal)((0,s.jsx)(n.P.div,{initial:{y:-100},animate:{y:20},exit:{y:-100},className:"fixed top-0 left-1/2 transform translate-x-[-50%] z-50",children:(0,s.jsx)("div",{className:"".concat(t&&"bg-red-700"," ").concat(a&&"bg-green-700"," rounded-lg shadow-lg p-6 relative max-w-lg w-full"),children:(0,s.jsx)("h1",{className:"font-bold text-white",children:c})})}),document.body)}},6656:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);let r=e=>{let{htmlFor:t,children:a,className:r=""}=e;return(0,s.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1 ".concat(r),children:a})}},9302:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155),r=a(6656);function l(e){let{name:t,type:a,label:l,value:n,onChange:i,required:o=!1}=e;return(0,s.jsxs)("div",{children:[l&&(0,s.jsx)(r.A,{htmlFor:t,children:l}),(0,s.jsx)("input",{id:t,name:t,type:a,className:"w-full border border-gray-200 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:n,onChange:i,required:o})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[941,441,684,358],()=>t(4581)),_N_E=e.O()}]);