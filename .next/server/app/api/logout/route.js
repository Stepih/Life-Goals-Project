(()=>{var e={};e.id=804,e.ids=[804],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2909:(e,r,t)=>{"use strict";t.d(r,{Gk:()=>c,Vg:()=>p,cC:()=>l,vD:()=>m});var i=t(3205),a=t.n(i),s=t(4999),n=t(4747);let o=process.env.JWT_SECRET,u=process.env.JWT_REFRESH_SECRET;function p(e){return a().sign(e,o,{expiresIn:Number(process.env.JWT_TIME)})}async function l(e){let r=a().sign(e,u,{expiresIn:Number(process.env.JWT_REFRESH_TIME)});return await n.z.user.update({where:{id:e.userId},data:{refreshToken:r}}),r}function c(e){try{return a().verify(e,u)}catch{return null}}async function d(e,r){let t=await n.z.user.findUnique({where:{id:r}});return!!t&&t.refreshToken===e}async function f(e){if(!e)return null;let r=c(e);return r&&await d(e,r.userId)?r:null}async function m(){let e=await (0,s.UL)(),r=e.get("token")?.value,t=e.get("refreshToken")?.value,i=function(e){if(!e)return null;let r=function(e){try{return a().verify(e,o)}catch{return null}}(e);return r||null}(r),n=await f(t);return{accessPayload:i,refreshPayload:n,isAuthenticated:!!i||!!n}}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4747:(e,r,t)=>{"use strict";t.d(r,{z:()=>a});let i=require("@prisma/client"),a=globalThis.prisma??new i.PrismaClient},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5511:e=>{"use strict";e.exports=require("crypto")},6487:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8335:()=>{},8354:e=>{"use strict";e.exports=require("util")},9158:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>y,routeModule:()=>m,serverHooks:()=>g,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>x});var i={};t.r(i),t.d(i,{POST:()=>f});var a=t(6559),s=t(8088),n=t(7719),o=t(2190),u=t(4999),p=t(2909),l=t(4747),c=t(9343);let d=async e=>{e.headers.append("Set-Cookie",(0,c.lK)("token","",{httpOnly:!0,path:"/",expires:new Date(0)})),e.headers.append("Set-Cookie",(0,c.lK)("refreshToken","",{httpOnly:!0,path:"/",expires:new Date(0)}))};async function f(){let e=await (0,u.UL)(),r=e.get("refreshToken")?.value;if(r){let e=(0,p.Gk)(r);e&&await l.z.user.update({where:{id:e.userId},data:{refreshToken:null}})}let t=o.NextResponse.json({message:"Logged out",redirectTo:"/"});return await d(t),t}let m=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/logout/route",pathname:"/api/logout",filename:"route",bundlePath:"app/api/logout/route"},resolvedPagePath:"W:\\programming\\projects\\react\\Life-Goals-Project\\src\\app\\api\\logout\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:h,workUnitAsyncStorage:x,serverHooks:g}=m;function y(){return(0,n.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:x})}},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9343:(e,r)=>{"use strict";r.lK=function(e,r,o){let u=o?.encode||encodeURIComponent;if(!t.test(e))throw TypeError(`argument name is invalid: ${e}`);let p=u(r);if(!i.test(p))throw TypeError(`argument val is invalid: ${r}`);let l=e+"="+p;if(!o)return l;if(void 0!==o.maxAge){if(!Number.isInteger(o.maxAge))throw TypeError(`option maxAge is invalid: ${o.maxAge}`);l+="; Max-Age="+o.maxAge}if(o.domain){if(!a.test(o.domain))throw TypeError(`option domain is invalid: ${o.domain}`);l+="; Domain="+o.domain}if(o.path){if(!s.test(o.path))throw TypeError(`option path is invalid: ${o.path}`);l+="; Path="+o.path}if(o.expires){var c;if(c=o.expires,"[object Date]"!==n.call(c)||!Number.isFinite(o.expires.valueOf()))throw TypeError(`option expires is invalid: ${o.expires}`);l+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.partitioned&&(l+="; Partitioned"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${o.priority}`)}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${o.sameSite}`)}return l};let t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString},9428:e=>{"use strict";e.exports=require("buffer")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[447,580,907],()=>t(9158));module.exports=i})();